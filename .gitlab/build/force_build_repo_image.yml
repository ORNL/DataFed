---
stages:
    - build

include:
    - local: .gitlab/common.yml

build-repo:
    extends: .docker_build_script
    stage: build
    variables:
        PROJECT: "datafed"
        COMPONENT: "repo"
        GIT_STRATEGY: clone
        DOCKER_FILE_PATH: "repository/docker/Dockerfile"
        DATAFED_HARBOR_REGISTRY: "$REGISTRY" # needed by c_harbor_artifact_count
        BUILD_INTERMEDIATE: "FALSE"
    tags:
        - ci-datafed-repo
        - docker
